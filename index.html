<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>RAWT</title>
  <link href="https://fonts.cdnfonts.com/css/akira-expanded" rel="stylesheet" />
  <style>
    body {
      margin: 0;
      -ms-overflow-style: none;
      scrollbar-width: none;
      font-family: 'Akira Expanded', sans-serif;
    }
    body::-webkit-scrollbar {
      display: none;
    }
    canvas {
      position: fixed;
      top: 0;
      left: 0;
      z-index: 0;
    }
    #fadeOverlay {
      position: fixed;
      top: 0; left: 0; right: 0; bottom: 0;
      background: black;
      opacity: 0;
      transition: opacity 5s ease;
      pointer-events: none;
      z-index: 1;
    }
    #navBar, #bottomBar {
      position: fixed;
      left: 0;
      width: 100%;
      height: 60px;
      background: rgba(0,0,0,0);
      z-index: 1000;
      pointer-events: none;
      transition: background 0.5s ease, opacity 0.5s ease;
      display: flex;
      justify-content: flex-end;
      align-items: center;
      padding-right: 20px;
    }
    #navBar { top: 0; }
    #bottomBar { bottom: 0; }
    #navBar.active, #bottomBar.active {
      background: white;
      pointer-events: auto;
      mix-blend-mode: exclusion;
    }
    #bottomBar.hidden-ui { opacity: 0; pointer-events: none; transition: opacity 0.3s ease; }
    #rawtOverlay {
      position: fixed;
      top: 50%; left: 50%;
      transform: translate(-50%, -50%);
      font-size: 6rem;
      font-weight: bold;
      color: white;
      mix-blend-mode: exclusion;
      user-select: none;
      pointer-events: none;
      z-index: 1001;
      transition: top 0.5s ease, left 0.5s ease, transform 0.5s ease, font-size 0.5s ease;
    }
    #rawtOverlay.stuck {
      top: 15px; left: 30px;
      transform: none;
      font-size: 2rem;
    }
    #scrollContainer {
      height: 200vh;
      z-index: 1;
      position: relative;
    }
    #rawtMenu {
      position: fixed;
      top: 60px; left: 0;
      font-family: 'Arial', sans-serif;
      background: transparent;
      padding: 10px 30px;
      z-index: 1002;
      width: 15%;
      height: 100%;
      pointer-events: auto;
      transition: opacity 0.3s ease;
    }
    #rawtMenu ul { list-style: none; margin: 0; padding: 0; }
    #rawtMenu ul li { margin-bottom: 10px; }
    #rawtMenu ul li:last-child { margin-bottom: 0; }
    #rawtMenu ul li a {
      text-decoration: none;
      font-weight: bold;
      display: block;
      transition: color 0.3s ease;
      mix-blend-mode: exclusion;
      color: white;
    }
    #rawtMenu ul li a:hover { cursor: pointer; }
    .hidden { opacity: 0; pointer-events: none; user-select: none; }
    .visible { opacity: 1; pointer-events: auto; user-select: auto; }
    #hoverZone {
      position: fixed;
      top: 0; right: 0;
      width: 30px; height: 60px;
      z-index: 1100;
      background: transparent;
      pointer-events: auto;
    }
    .hidden-ui { opacity: 0; pointer-events: auto; transition: opacity 0.3s ease; }
  </style>
</head>
<body>
  <div id="fadeOverlay"></div>
  <div id="navBar"></div>
  <div id="rawtOverlay">RAWT</div>
  <div id="rawtMenu" class="hidden">
    <ul>
      <li><a href="#">NaN</a></li>
      <li><a href="#">404</a></li>
      <li><a href="#">false</a></li>
      <li><a href="#">true</a></li>
      <li><a href="#">nil</a></li>
      <li><a href="#">break</a></li>
      <li><a href="#">exit</a></li>
      <li><a href="#">fail</a></li>
      <li><a href="#">catch</a></li>
      <li><a href="#">throw</a></li>
      <li><a href="#">debug</a></li>
      <li><a href="#">stack</a></li>
      <li><a href="#">trace</a></li>
      <li><a href="#">memory</a></li>
      <li><a href="#">overrun</a></li>
      <li><a href="#">core</a></li>
      <li><a href="#">zero</a></li>
      <li><a href="#">reboot</a></li>
      <li><a href="#">sys</a></li>
      <li><a id="hideUIButton">hide-ui</a></li>
    </ul>
  </div>
  <div id="bottomBar"></div>
  <div id="scrollContainer"></div>

  <script src="https://cdn.jsdelivr.net/npm/three@0.158.0/build/three.min.js"></script>
  <script>
    const hideUIButton = document.getElementById('hideUIButton');
    const navBar = document.getElementById('navBar');
    const rawtMenu = document.getElementById('rawtMenu');
    const rawt = document.getElementById('rawtOverlay');
    const bottomBar = document.getElementById('bottomBar');

    let scene, camera, renderer, mesh, material, clock;
    let uniforms;

    function init() {
      if (renderer) renderer.domElement.remove();

      scene = new THREE.Scene();
      camera = new THREE.PerspectiveCamera(45, window.innerWidth / window.innerHeight, 0.1, 1000);
      camera.position.set(0, 20, 40);

      renderer = new THREE.WebGLRenderer({ antialias: false, powerPreference: "high-performance" });
      renderer.setSize(window.innerWidth, window.innerHeight);
      renderer.setPixelRatio(window.devicePixelRatio * 0.75);
      document.body.appendChild(renderer.domElement);

      const light = new THREE.DirectionalLight(0xffffff, 1);
      light.position.set(0, 100, 100).normalize();
      scene.add(light);
      scene.add(new THREE.AmbientLight(0x404040));

      uniforms = {
        uTime: { value: 0 },
        uAmplitude: { value: 2.0 },
        uColor: { value: new THREE.Color(0xffffff) }
      };

      material = new THREE.ShaderMaterial({
        uniforms: uniforms,
        wireframe: true,
        vertexShader: `
          uniform float uTime;
          uniform float uAmplitude;
          varying float vHeight;
          void main() {
            vec3 pos = position;
            float wave1 = sin(pos.x * 0.3 + uTime * 0.5);
            float wave2 = cos(pos.y * 0.4 + uTime * 0.3);
            float wave3 = sin((pos.x + pos.y) * 0.2 + uTime * 0.7);
            pos.z += (wave1 + wave2 + wave3) * uAmplitude;
            vHeight = pos.z;
            gl_Position = projectionMatrix * modelViewMatrix * vec4(pos, 1.0);
          }
        `,
        fragmentShader: `
          uniform vec3 uColor;
          varying float vHeight;
          void main() {
            float shade = 0.5 + 0.5 * sin(vHeight * 0.2);
            gl_FragColor = vec4(uColor * shade, 1.0);
          }
        `,
        transparent: true
      });

      const geometry = new THREE.PlaneGeometry(100, 100, 200, 200);
      mesh = new THREE.Mesh(geometry, material);
      mesh.rotation.x = -Math.PI / 2;
      scene.add(mesh);

      clock = new THREE.Clock();
      window.addEventListener('resize', onWindowResize, false);
    }

    function onWindowResize() {
      camera.aspect = window.innerWidth / window.innerHeight;
      camera.updateProjectionMatrix();
      renderer.setSize(window.innerWidth, window.innerHeight);
    }

    function animate() {
      requestAnimationFrame(animate);
      uniforms.uTime.value = clock.getElapsedTime();
      renderer.render(scene, camera);
    }

    init();
    animate();

    // === UI Logic unchanged from your version ===
    function updateHideUIButtonVisibility() {
      if (navBar.classList.contains('active')) {
        hideUIButton.classList.add('visible-ui');
      } else {
        hideUIButton.classList.remove('visible-ui');
      }
    }
    hideUIButton.addEventListener('click', () => {
      navBar.classList.add('hidden-ui');
      rawtMenu.classList.add('hidden-ui');
      bottomBar.classList.add('hidden-ui');
      updateHideUIButtonVisibility();
    });
    function showUI() {
      navBar.classList.remove('hidden-ui');
      rawtMenu.classList.remove('hidden-ui');
      bottomBar.classList.remove('hidden-ui');
      updateHideUIButtonVisibility();
    }
    window.addEventListener('scroll', () => {
      const scrollY = window.scrollY;
      const triggerPoint = window.innerHeight / 2;
      const isStuck = scrollY > triggerPoint;
      rawt.classList.toggle('stuck', isStuck);
      navBar.classList.toggle('active', isStuck);
      bottomBar.classList.toggle('active', isStuck);
      if (isStuck) {
        rawtMenu.classList.add('visible');
        rawtMenu.classList.remove('hidden');
      } else {
        rawtMenu.classList.add('hidden');
        rawtMenu.classList.remove('visible');
      }
      updateHideUIButtonVisibility();
    });
    rawtMenu.addEventListener('mouseenter', showUI);
    navBar.addEventListener('mouseenter', showUI);
    updateHideUIButtonVisibility();
  </script>
</body>
</html>
